// This file was generated by "update.py" on 2020-04-24 21:45:29.286524

describe(`Inline tests at core/o4t.js`, function () {
  this.timeout(10000)
  let flag = new eYo.test.Flag()
  let onr = eYo.c9r && eYo.c9r.new('onr')
  before (function() {
    flag.reset()
  })

  describe(`P6Y`, function () {
    it(`p6yReplace`, function () {
      let ns = eYo.o4t.makeNS()
      ns.makeBaseC9r({
        properties: {
          foo: 1,
          chi: {
            after: 'foo',
            value: 2,
          },
          mi: {
            after: 'chi',
            value: 3,
          },
        },
      })
      var o = ns.new('o', onr)
      o.eyo.p6yForEach(o, v => flag.push(v))
      flag.expect(123)
      let foo_p = eYo.p6y.new({
        value: 4,
      }, 'foo', onr)
      let chi_p = eYo.p6y.new({
        value: 5,
      }, 'chi', onr)
      let mi_p = eYo.p6y.new({
        value: 6,
      }, 'mi', onr)
      chai.expect(o.foo).equal(1)
      o.eyo.p6yReplace(o, 'foo', foo_p)
      o.eyo.p6yForEach(o, v => flag.push(v))
      flag.expect(423)
      chai.expect(o.foo_p.__target).equal(foo_p)
      chai.expect(o.foo).equal(4)
      o.foo_ -= 3
      chai.expect(foo_p.value).equal(1)
      o.eyo.p6yForEach(o, v => flag.push(v))
      flag.expect(123)
      foo_p.value_ += 3
      chai.expect(o.foo).equal(4)
      o = ns.new('o', onr)
      chai.expect(o.chi).equal(2)
      o.eyo.p6yReplace(o, 'chi', chi_p)
      o.eyo.p6yForEach(o, v => flag.push(v))
      flag.expect(153)
      chai.expect(o.chi_p.__target).equal(chi_p)
      chai.expect(o.chi).equal(5)
      o.chi_ -= 3
      chai.expect(chi_p.value).equal(2)
      o.eyo.p6yForEach(o, v => flag.push(v))
      flag.expect(123)
      chi_p.value_ += 3
      chai.expect(o.chi).equal(5)
      o = ns.new('o', onr)
      chai.expect(o.mi).equal(3)
      o.eyo.p6yReplace(o, 'mi', mi_p)
      o.eyo.p6yForEach(o, v => flag.push(v))
      flag.expect(126)
      chai.expect(o.mi_p.__target).equal(mi_p)
      chai.expect(o.mi).equal(6)
      o.mi_ -= 3
      chai.expect(mi_p.value).equal(3)
      o.eyo.p6yForEach(o, v => flag.push(v))
      flag.expect(123)
      mi_p.value_ += 3
      chai.expect(o.mi).equal(6)
    })
  })

})
