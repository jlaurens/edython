// This file was generated by "update.py" on 2020-04-26 20:45:20.478308

describe(`Inline tests at core/geom.js`, function () {
  this.timeout(10000)
  let flag = new eYo.test.Flag()
  let onr = eYo.c9r && eYo.c9r.new('onr')
  before (function() {
    flag.reset()
  })

  describe(`Point`, function () {
    it(`Point x`, function () {
      var m = {c: 1, l: 2}
      var mm = {x: m.c * eYo.geom.X, y: m.l * eYo.geom.Y}
      var p = new eYo.geom.Point(false, mm)
      chai.expect(p).almost.eql(m)
      p.x_ += 5 * eYo.geom.X
      chai.expect(p).almost.eql({c: m.c + 5, l: m.l})
    })
    it(`Point y`, function () {
      var m = {c: 1, l: 2}
      var mm = {x: m.c * eYo.geom.X, y: m.l * eYo.geom.Y}
      var p = new eYo.geom.Point(false, mm)
      chai.expect(p).almost.eql(m)
      p.y_ += 5 * eYo.geom.Y
      chai.expect(p).almost.eql({c: m.c, l: m.l + 5})
    })
    it(`Point magnitude`, function () {
      var mm = {x: 3, y: 4}
      var p = new eYo.geom.Point(false, mm)
      chai.expect(p.magnitude).almost.eql(5)
    })
    it(`Point: set`, function () {
      var p, m, mm
      p = new eYo.geom.Point()
      m = {c: 1, l: 2}
      p.set(m); chai.expect(p).eql(m)
      chai.expect(() => p.set(m, null)).not.throw()
      chai.expect(() => p.set(m, 1)).throw()
      p = new eYo.geom.Point()
      mm = {x: m.c * eYo.geom.X, y: m.l * eYo.geom.Y}
      p.set(mm); chai.expect(p).almost.eql(m)
      chai.expect(() => p.set(mm, null)).not.throw()
      chai.expect(() => p.set(mm, 1)).throw()
      p = new eYo.geom.Point()
      mm = {clientX: m.c * eYo.geom.X, clientY: m.l * eYo.geom.Y}
      p.set(mm); chai.expect(p).almost.eql(m)
      chai.expect(() => p.set(mm, null)).not.throw()
      chai.expect(() => p.set(mm, 1)).throw()
      p = new eYo.geom.Point()
      mm = {width: m.c * eYo.geom.X, height: m.l * eYo.geom.Y}
      p.set(mm); chai.expect(p).almost.eql(m)
      chai.expect(() => p.set(mm, null)).not.throw()
      chai.expect(() => p.set(mm, 1)).throw()
      let p_c = eYo.p6y.new('c', onr)
      let p_l = eYo.p6y.new('l', onr)
      p = new eYo.geom.Point(); p_c.value_ = 1; p_l.value_ = 2
      p.set(p_c, 2)
      chai.expect(p).eql(m)
      chai.expect(p.c_ = 2).equal(p_c.value)
      p = new eYo.geom.Point(); p_c.value_ = 1; p_l.value_ = 2
      p.set(1, p_l)
      chai.expect(p).eql(m)
      chai.expect(p.l_ = 1).equal(p_l.value)
      p = new eYo.geom.Point(); p_c.value_ = 1; p_l.value_ = 2
      p.set(p_c, p_l)
      chai.expect(p).eql(m)
      chai.expect(p).eql({c: (p_c.value_ = 2), l: (p_l.value_ = 1)})
    })
  })
  describe(`Size`, function () {
    it(`Size init`, function () {
      var s, ss
      var m = {w: 3, h: 4}
      var p_snap = eYo.p6y.new('p', onr); p_snap.value_ = true
      chai.expect(() => new eYo.geom.Size(1, 2, 3)).throw()
      s = new eYo.geom.Size()
      s.eyo.p6yReplace(s, 'snap', p_snap)
      chai.expect(s.snap_p.__target).equal(p_snap)
      chai.expect(s.snap_ = false).equal(p_snap.value)
      chai.expect(p_snap.value_ = true).equal(s.snap)
      s = new eYo.geom.Size(p_snap)
      chai.expect(s).almost.eql({w: 0, h: 0})
      chai.expect(s.snap_ = false).equal(p_snap.value)
      chai.expect(p_snap.value_ = true).equal(s.snap)
      s = new eYo.geom.Size(p_snap, m.w)
      chai.expect(s).almost.eql({w: m.w, h: 0})
      chai.expect(s.snap_ = false).equal(p_snap.value)
      chai.expect(p_snap.value_ = true).equal(s.snap)
      s = new eYo.geom.Size(p_snap, m.w, m.h)
      chai.expect(s).almost.eql(m)
      chai.expect(s.snap_ = false).equal(p_snap.value)
      chai.expect(p_snap.value_ = true).equal(s.snap)
      ss = eYo.geom.randSize(true)
      s = new eYo.geom.Size(ss)
      chai.expect(s.snap).equal(ss.snap)
      chai.expect(s).almost.eql(ss)
      ss = eYo.geom.randSize(false)
      s = new eYo.geom.Size(ss)
      chai.expect(s).almost.eql(ss)
      chai.expect(s.snap).almost.eql(ss.snap)
      s = new eYo.geom.Size(true, m.w)
      chai.expect(s).almost.eql({w: m.w, h: 0})
      chai.expect(s.snap).true
      s = new eYo.geom.Size(false, m.w)
      chai.expect(s).almost.eql({w: m.w, h: 0})
      chai.expect(s.snap).false
      s = new eYo.geom.Size(true, m.w, m.h)
      chai.expect(s).almost.eql(m)
      chai.expect(s.snap).true
      s = new eYo.geom.Size(false, m.w, m.h)
      chai.expect(s).almost.eql(m)
      chai.expect(s.snap).false
    })
    it(`Size: set`, function () {
      var s, m, mm
      s = new eYo.geom.Size()
      m = {w: 3, h: 4}
      s.set(m)
      chai.expect(s).eql(m)
      chai.expect(() => s.set(m, null)).not.throw()
      chai.expect(() => s.set(m, 1)).throw()
      s = new eYo.geom.Size()
      mm = {width: m.w * eYo.geom.X, height: m.h * eYo.geom.Y}
      s.set(mm)
      chai.expect(s).almost.eql(m)
      chai.expect(() => s.set(mm, null)).not.throw()
      chai.expect(() => s.set(mm, 1)).throw()
      s = new eYo.geom.Size()
      mm = {x: m.w * eYo.geom.X, y: m.h *  eYo.geom.Y}
      s.set(mm)
      chai.expect(s).almost.eql(m)
      chai.expect(() => s.set(mm, null)).not.throw()
      chai.expect(() => s.set(mm, 1)).throw()
      s = new eYo.geom.Size()
      mm = {clientX: m.w * eYo.geom.X, clientY: m.h *  eYo.geom.Y}
      s.set(mm)
      chai.expect(s).almost.eql(m)
      chai.expect(() => s.set(mm, null)).not.throw()
      chai.expect(() => s.set(mm, 1)).throw()
      let p_w = eYo.p6y.new('w', onr)
      let p_h = eYo.p6y.new('h', onr)
      s = new eYo.geom.Size()
      p_w.value_ = m.w; p_h.value_ = m.h
      s.set(p_w, m.h)
      chai.expect(s).eql(m)
      chai.expect(p_w.value_ = 9).equal(s.w)
      chai.expect(s.w_ = m.w).equal(p_w.value)
      s = new eYo.geom.Size()
      p_w.value_ = m.w; p_h.value_ = m.h
      s.set(m.w, p_h)
      chai.expect(s).eql(m)
      chai.expect(p_h.value_ = 9).equal(s.h)
      chai.expect(s.h_ = m.h).equal(p_h.value)
      s = new eYo.geom.Size()
      p_w.value_ = m.w; p_h.value_ = m.h
      s.set(p_w, p_h)
      chai.expect(s).eql(m)
      chai.expect(s).eql({w: (p_w.value_ = m.h), h: (p_h.value_ = m.w)})
      chai.expect(s).eql({w: (p_w.value_ = m.w), h: (p_h.value_ = m.h)})
    })
  })
  describe(`Rect`, function () {
    it(`Rect origin`, function () {
      var m = {c: 1, l: 2}
      var r = eYo.geom.randRect(false)
      let p = eYo.geom.randPoint(false)
      chai.expect(r.origin).not.equal(p)
      r.origin_ = p
      chai.expect(r.origin).not.equal(p)
      chai.expect(r.origin).almost.eql(p)
      var r = eYo.geom.randRect(false)
      let p6y = eYo.p6y.new({
        value: p,
      }, 'p6y', onr)
      r.origin_ = p6y
      chai.expect(r.origin).not.equal(p6y)
      chai.expect(r.origin_p.__target).equal(p6y)
      chai.expect(r.origin).almost.eql(p)
      r.c_ = m.c
      r.l_ = m.l
      chai.expect(p).almost.eql(m)
    })
    it(`Rect size`, function () {
      var m = {w: 3, h: 4}
      var r = eYo.geom.randRect(false)
      let s = eYo.geom.randSize(false)
      chai.expect(r.size).not.equal(s)
      r.size_ = s
      chai.expect(r.size).not.equal(s)
      chai.expect(r.size).almost.eql(s)
      var r = eYo.geom.randRect(false)
      let p6y = eYo.p6y.new({
        value: s,
      }, 'p6y', onr)
      r.size_ = p6y
      chai.expect(r.size).not.equal(p6y)
      chai.expect(r.size_p.__target).equal(p6y)
      chai.expect(r.size).almost.eql(s)
      r.w_ = m.w
      r.h_ = m.h
      chai.expect(s).almost.eql(m)
    })
    it(`Rect c_mid`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var r = new eYo.geom.Rect(false, m)
      chai.expect(r).almost.eql(m)
      chai.expect(r.c_mid).almost.equal(2.5)
      r.c_mid_ += 5
      chai.expect(r).almost.eql({c: m.c + 5, l: m.l, w: m.w, h: m.h})
    })
    it(`Rect c_max`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var r = new eYo.geom.Rect(false, m)
      chai.expect(r).almost.eql(m)
      chai.expect(r.c_max).almost.equal(4)
      r.c_max_ += 5
      chai.expect(r).almost.eql({c: m.c + 5, l: m.l, w: m.w, h: m.h})
    })
    it(`Rect l_mid`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var r = new eYo.geom.Rect(false, m)
      chai.expect(r).almost.eql(m)
      chai.expect(r.l_mid).almost.equal(4)
      r.l_mid_ += 5
      chai.expect(r).almost.eql({c: m.c, l: m.l + 5, w: m.w, h: m.h})
    })
    it(`Rect l_max`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var r = new eYo.geom.Rect(false, m)
      chai.expect(r).almost.eql(m)
      chai.expect(r.l_max).almost.equal(6)
      r.l_max_ += 5
      chai.expect(r).almost.eql({c: m.c, l: m.l + 5, w: m.w, h: m.h})
    })
    it(`Rect x`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var r = new eYo.geom.Rect(false, m)
      chai.expect(r).almost.eql(m)
      chai.expect(r.x).almost.equal(m.c * eYo.geom.X)
      r.x_ += 5
      chai.expect(r).almost.eql({c: m.c + 5, l: m.l, w: m.w, h: m.h})
    })
    it(`Rect x_mid`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var mm = {x: 1 * eYo.geom.X, y: 2 * eYo.geom.Y, width: 3 * eYo.geom.X, height: 4 * eYo.geom.Y}
      var r = new eYo.geom.Rect(false, mm)
      chai.expect(r).almost.eql(m)
      chai.expect(r.x_mid).almost.equal(2.5 * eYo.geom.X)
      r.x_mid_ += 5 * eYo.geom.X
      chai.expect(r).almost.eql({c: m.c + 5, l: m.l, w: m.w, h: m.h})
    })
    it(`Rect x_max`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var mm = {x: 1 * eYo.geom.X, y: 2 * eYo.geom.Y, width: 3 * eYo.geom.X, height: 4 * eYo.geom.Y}
      var r = new eYo.geom.Rect(false, mm)
      chai.expect(r).almost.eql(m)
      chai.expect(r.x_max).almost.equal(4 * eYo.geom.X)
      r.x_max_ += 5 * eYo.geom.X
      chai.expect(r).almost.eql({c: m.c + 5, l: m.l, w: m.w, h: m.h})
    })
    it(`Rect y_mid`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var mm = {x: 1 * eYo.geom.X, y: 2 * eYo.geom.Y, width: 3 * eYo.geom.X, height: 4 * eYo.geom.Y}
      var r = new eYo.geom.Rect(false, mm)
      chai.expect(r).almost.eql(m)
      chai.expect(r.y_mid).almost.equal(4 * eYo.geom.Y)
      r.y_mid_ += 5 * eYo.geom.Y
      chai.expect(r).almost.eql({c: m.c, l: m.l + 5, w: m.w, h: m.h})
    })
    it(`Rect y_max`, function () {
      var m = {c: 1, l: 2, w: 3, h: 4}
      var mm = {x: 1 * eYo.geom.X, y: 2 * eYo.geom.Y, width: 3 * eYo.geom.X, height: 4 * eYo.geom.Y}
      var r = new eYo.geom.Rect(false, mm)
      chai.expect(r).almost.eql(m)
      chai.expect(r.y_max).almost.equal(6 * eYo.geom.Y)
      r.y_max_ += 5 * eYo.geom.Y
      chai.expect(r).almost.eql({c: m.c, l: m.l + 5, w: m.w, h: m.h})
    })
    it(`Rect: set`, function () {
      var r, mm
      var m = {c: 1, l: 2, w: 3, h: 4}
      r = new eYo.geom.Rect()
      mm = {left: m.c * eYo.geom.X, top: m.l * eYo.geom.Y, right: (m.c + m.w) * eYo.geom.X, bottom: (m.l + m.h) * eYo.geom.X};
      r.set(mm)
      chai.expect(r).almost.eql(m)
      chai.expect(() => r.set(mm, null)).not.throw()
      chai.expect(() => r.set(mm, 1)).throw()
      r = new eYo.geom.Rect()
      mm = {x: m.c * eYo.geom.X, y: m.l * eYo.geom.Y, width: m.w * eYo.geom.X, height: m.h * eYo.geom.Y};
      r.set(mm)
      chai.expect(r).almost.eql(m)
      chai.expect(() => r.set(mm, null)).not.throw()
      chai.expect(() => r.set(mm, 1)).throw()
      r = new eYo.geom.Rect()
      m = {c: 1, l: 2, w: 3, h: 4}
      r.set(m)
      chai.expect(r).eql(m)
      chai.expect(() => r.set(m, null)).not.throw()
      chai.expect(() => r.set(m, 1)).throw()
      r.set(1, 2, 3, 4); chai.expect(r).eql(m)
      let p_c = eYo.p6y.new('c', onr)
      let p_l = eYo.p6y.new('l', onr)
      let p_w = eYo.p6y.new('w', onr)
      let p_h = eYo.p6y.new('h', onr)
      m = {c: 1, l: 2, w: 3, h: 4}
      r.set(m.c, m.l, m.h, m.w); chai.expect(r).eql(m)
      p_c.value_ = m.c; p_l.value_ = m.l
      p_w.value_ = m.w; p_h.value_ = m.h
      r = new eYo.geom.Rect(p_c, m.l, m.w, m.h); chai.expect(r).eql(m)
      chai.expect(r.c_ = 5).eql(p_c.value)
      chai.expect(p_c.value_ = m.c).eql(r.c)
      r = new eYo.geom.Rect(p_c, m.l, m.w, m.h); chai.expect(r).eql(m)
      chai.expect(r.c_ = 5).eql(p_c.value)
      chai.expect(p_c.value_ = m.c).eql(r.c)
      r = new eYo.geom.Rect(m.c, p_l, m.w, m.h); chai.expect(r).eql(m)
      chai.expect(r.l_ = 5).eql(p_l.value)
      chai.expect(p_l.value_ = m.l).eql(r.l)
      r = new eYo.geom.Rect(m.c, m.l, p_w, m.h); chai.expect(r).eql(m)
      chai.expect(r.w_ = 5).eql(p_w.value)
      chai.expect(p_w.value_ = m.w).eql(r.w)
      r = new eYo.geom.Rect(m.c, m.l, m.w, p_h); chai.expect(r).eql(m)
      chai.expect(r.h_ = 5).eql(p_h.value)
      chai.expect(p_h.value_ = m.h).eql(r.h)
      r = new eYo.geom.Rect(m.c, m.l, p_w, m.h); chai.expect(r).eql(m)
      chai.expect(r.w_ = 5).eql(p_w.value)
      let p = new eYo.geom.Point(m)
      let s = new eYo.geom.Size(m)
    })
  })

})
